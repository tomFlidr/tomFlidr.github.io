/**
 * Javascript Class Helper
 * @author Tom Flidr | tomflidr(at)gmail(dot)com
 * @version 1.3
 * @date 2016-07-19
 * @usage
var ClassName = Class({
	Extend: ParentClassName,
	Static: {
		staticMethod: function () {
			// call parent static method with same name
			this.parent(param1, param2, ...);
			// call any other parent static method
			this.parent.otherParentStaticMethod(param1, param2, ...);
		}
	},
	Constructor: function () {
		// call parent Constructor
		this.parent(param1, param2);
		// call any other parent dynamic method
		this.parent.otherParentDynamicMethod(param1, param2, ...);
	},
	dynamicMethod: function () {
		// call parent dynamic method with same name
		this.parent(param1, param2);
		// call any other parent dynamic method
		this.parent.otherParentDynamicMethod(param1, param2, ...);
	}
});
*/
var Class=function(m){function a(){var d=[].slice.apply(arguments),c=a.Constants;if("string"==typeof d[0]){return a.l(d[0],1<d.length?d[1]:{})}d=a.j(d[0],"Class");d[c.Namespace]="";d[c.Fullname]="Class";return d}Function.prototype.bind||(Function.prototype.bind=function(a){function c(){return g.apply(this instanceof b?this:a,f.concat(e.call(arguments)))}function b(){}if("function"!==typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var e=[].slice,f=e.call(arguments,1),g=this;this.prototype&&(b.prototype=this.prototype);c.prototype=new b;return c});a.Constants={ClassImprint:"$classImprint",InstanceImprint:"$instanceImprint",Extend:"Extend",Static:"Static",Constructor:"Constructor",Name:"Name",Namespace:"Namespace",Fullname:"Fullname",self:"self",parent:"parent"};a.a={};a.ClassImprintBaseName="class{0}";a.InstanceImprintBaseName="instance{0}";a.c=0;a.f=0;a.g=[{},{}];a.h={};a.CustomizeSyntax=function(d){var c,b;for(b in d){c=d[b],a.a[c]=!0,a.Constants[b]=c}};a.CustomizeSyntax(a.Constants);a.Create=function(a,c){for(var b=a.split("."),e,f=m,g=0,h=b.length;g<h;g+=1){e=b[g];if(!(e in f)){throw Error("Class '"+a+"' doesn't exist!");}f=f[e]||{}}c.unshift(f);return new(f.bind.apply(f,c))};a.Define=function(d,c){return a.l(d,c||{})};a.l=function(d,c){for(var b=d.split("."),e=b.pop(),f="",g=a.Constants,h=m,k=0,l=b.length;k<l;k+=1){f=b[k],f in h||(h[f]={}),h=h[f]||{}}c.toString==={}.toString&&(c.toString=function(){return"[object "+d+"]"});f=a.j(c,e);f[g.Namespace]=b.join(".");f[g.Fullname]=d;return h[e]=f};a.j=function(d,c){function Class(){return a.D(d,this,[].slice.apply(arguments))}var b=Class,e=a.Constants,f=e.Extend,g=e.Name,h=e.ClassImprint,e=e.self,k="",l="";d[f]&&("function"==typeof d[f][h]?l=d[f][h]():(l=a.i(),d[f][h]=function(){return l}));k=a.i();b[h]=function(){return k};a.u(b,d);a.v(b,d);a.F(b,d);a.G(b,d);b[e]=b;d[f]&&(b[e][f]=d[f],a.h[k]=l);b.prototype[e]=b;a.o(b);b[g]=c;return b};a.D=function(d,c,b){var e=a.Constants,f=e.Constructor,g="";if(c===m){a.B(d,c,b,f)}else{return g=a.C(),c[e.InstanceImprint]=function(){return g},a.H(c),"function"==typeof c[f]?c[f].apply(c,b):c}};a.B=function(a,c,b,e){if("function"==typeof a[e]){a[e].apply(c,b)}else{throw Error("Class definition is not possible to call as function, it's necessary to create instance with 'new' keyword before class definition.");}};a.i=function(){var d=a.ClassImprintBaseName.replace("{0}",a.c);a.c+=1;return d};a.C=function(){var d=a.InstanceImprintBaseName.replace("{0}",a.f);a.f+=1;return d};a.u=function(d,c){function Prototype(){}var b=Prototype,e=a.Constants,f=e.Name,g="";if(e=c[e.Extend]){e&&(b.prototype=e.prototype),d.prototype=new b}e=d.prototype;for(g in e){"function"==typeof e[g]&&"string"!=typeof e[g][f]&&(e[g][f]=g)}};a.v=function(d,c){var b="",e=a.Constants,f=e.Name;if(e=c[e.Extend]){for(b in e){!0!==a.a[b]&&(d[b]=e[b],"function"==typeof e[b]&&(d[b][f]=b))}}};a.F=function(d,c){var b=d.prototype,e=a.Constants,f=e.Name,g=e.Constructor,h="";for(h in c){!0!==a.a[h]&&(b[h]=c[h],"function"==typeof c[h]&&(b[h][f]=h))}c[g]&&(b[g]=c[g],b[g][f]=g);b[e.InstanceImprint]=function(){return""}};a.G=function(d,c){var b="",e=a.Constants,f=e.Name;if(e=c[e.Static]){for(b in e){!0!==a.a[b]&&(d[b]=e[b],"function"==typeof e[b]&&(d[b][f]=b))}}};a.H=function(d){var c=a.Constants,b=c.Name,e=c.parent,f=c.self,g="",h=d[f],c=h[f][c.Extend];h.prototype[e]=function(){return a.b(this,arguments.callee.caller[b],[].slice.apply(arguments),0)};e=h.prototype[e];if(c){for(g in h=c.prototype,h){"function"==typeof h[g]&&!0!==a.a[g]&&(e[g]=a.m(d,g))}}};a.m=function(d,c){return function(){return a.b(d,c,[].slice.apply(arguments),0)}};a.o=function(d){var c=a.Constants,b=c.Name,e=c.parent,f="",c=d[c.Extend];d[e]=function(){return a.b(this,arguments.callee.caller[b],[].slice.apply(arguments),1)};e=d[e];if(c){for(f in c){"function"!=typeof c[f]||a.a[f]||(e[f]=a.s(d,f))}}};a.s=function(d,c){return function(){return a.b(d,c,[].slice.apply(arguments),1)}};a.b=function(d,c,b,e){var f=a.Constants,g=f.ClassImprint,h=f.InstanceImprint,f=f.self,h=d[e?g:h](),f=d[f],g=f[g](),g=a.A(g,h,e),g=a.w(f,g),g=e?g[c]:g.prototype[c],f=typeof g;if("undefined"==f){try{throw"No parent method named: '"+c+"'.";}catch(k){console.log(k.stack)}}else{if("function"!=f){throw"Parent method '"+c+"' is not a function.";}}d=g.apply(d,b);delete a.g[e][h];return d};a.A=function(d,c,b){b=a.g[b];"undefined"==typeof b[c]&&(b[c]=d);d=a.h[b[c]];if(!d){throw Error("No parent class defined.");}return b[c]=d};a.w=function(d,c){for(var b=a.Constants,e=b.Extend,b=b.ClassImprint,f=!1,g;"undefined"!=typeof d[e];){g=d[e];if(g[b]()==c){f=!0;break}d=g}if(!f){throw Error("No parent class definition found for class imprint: '"+c+"'.");}return g};return m.Class=a}("undefined"!==typeof module&&module.exports?global:this);