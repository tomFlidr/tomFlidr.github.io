/**
 * Javascript Class Helper
 * @author Tom Flidr <tomflidr@gmail.com>
 * @version 2.1.1
 * @summary 2017-07-26
 * @example
Class.Define('ClassName', {
	Extend: ParentClassDef,
	Static: {
		staticElm: function () {
			// call parent static method with same name
			this.parent(arguments);
			// call any other parent static method
			this.parent.otherParentStaticElm(arguments);
		}
	},
	Constructor: function (param1, param2;) {
		// call parent Constructor:
		this.parent(arguments);
		// reflect your code by:
		console.log(this.self.Name, this.self.Fullname, this.self.Namespace);
	},
	dynamicElm: function () {
		// call parent dynamic method with same name:
		this.parent(arguments);
		// call any other parent dynamic method
		this.parent.otherParentDynamicElm(arguments);
	}
});
*/
var Class=function(k){function a(){var b=a.c(arguments);if("string"==typeof b[0])return a.u(b[0],1<b.length?b[1]:{});b=a.s(b[0],"Class");b[a.a.Namespace]="";b[a.a.Fullname]="Class";return b}if("undefined"!=typeof k.Class)return k.Class;Function.prototype.bind||(Function.prototype.bind=function(a){function d(){return g.apply(this instanceof c?this:a,e.concat(f.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
var f=[].slice,e=f.call(arguments,1),g=this;this.prototype&&(c.prototype=this.prototype);d.prototype=new c;return d});a.Constants={GetClassUid:"GetClassUid",GetInstanceUid:"GetInstanceUid",Inherited:"Inherited",Extend:"Extend",Static:"Static",Constructor:"Constructor",Name:"Name",Namespace:"Namespace",Fullname:"Fullname","static":"static",self:"self",parent:"parent"};a.ConstructionBehaviour={ErrorIfNotFound:0,NullIfNotFound:1,DoNothing:2};a.ClassUidTemplate="class{0}";a.InstanceUidTemplate="instance{0}";
a.b={};a.a={};a.i=0;a.l=0;a.g=0;a.f=function(){var a=k.navigator,d=k.location;return"object"==typeof a&&!a.onLine&&-1<a.userAgent.indexOf(".NET")&&"object"==typeof d&&"about:blank"==d.href&&"/blank"==d.pathname?!0:!1}();a.CustomizeSyntax=function(b){var d;b=b||{};for(var c in b)d=b[c],a.b[d]=!0,a.a[c]=d;return a};a.CustomizeSyntax(a.Constants);a.SetConstructionBehaviour=function(b){a.g="number"==typeof b?b:0;return a};a.Define=function(b,d){return a.u(b,d||{})};a.GetByName=function(b){for(var d=b.split("."),
c,f=k,e=0,g=d.length;e<g;e+=1){c=d[e];if(!(c in f)){if(0===a.g)throw Error("Class '"+b+"' doesn't exist!");if(1===a.g){f=null;break}}f=f[c]}return f};a.Create=function(b){var d=a.GetByName(b),c=a.c(arguments);if(1===a.g&&!d)return d;c.shift();c.unshift(d);return new (d.bind.apply(d,c))};a.u=function(b,d){for(var c=b.split("."),f=c.pop(),e="",g=k,h=0,l=c.length;h<l;h+=1)e=c[h],e in g||(g[e]={}),g=g[e]||{};d.toString==={}.toString&&(d.toString=function(){return"[object "+b+"]"});e=a.s(d,f);e[a.a.Namespace]=
c.join(".");e[a.a.Fullname]=b;return g[f]=e};a.s=function(b,d){var c=a.a.Extend,f=a.a.Name,e=a.a.GetClassUid,g=a.a.Constructor,h=a.a.self,l=a.a["static"],k="",m="",g=a.f?b[g]?b[g]:b:function(){return a.B(b,this,a.c(arguments))};b[c]&&("function"==typeof b[c][e]?m=b[c][e]():(m=a.o(),b[c][e]=function(){return m}));k=a.o();g[e]=function(){return k};a.K(g,b,m);a.L(g,b,m);a.C(g,b);a.D(g,b);g[h]=g;g[l]=g;b[c]&&(g[h][c]=b[c],g[l][c]=b[c]);g.prototype[h]=g;g.prototype[l]=g;a.H(g);g[f]=d;return g};a.B=function(b,
d,c){var f=a.a.Constructor,e="";if(d===k)return a.w(b,d,c,f);e=a.A();d[a.a.GetInstanceUid]=function(){return e};a.F(d);return"function"==typeof d[f]?d[f].apply(d,c):d};a.w=function(a,d,c,f){if("function"==typeof a[f])return a[f].apply(d,c);throw Error("Class definition is not possible to call as function, it's necessary to create instance with 'new' keyword before class definition.");};a.o=function(){var b=a.ClassUidTemplate.replace("{0}",a.i);a.i+=1;return b};a.A=function(){var b=a.InstanceUidTemplate.replace("{0}",
a.l);a.l+=1;return b};a.K=function(b,d){function c(){}var f=d[a.a.Extend],e;f&&(e=f.prototype,f&&(c.prototype=e),b.prototype=new c,a.v(b.prototype,e,d,0));a.J(b.prototype,e)};a.L=function(b,d){var c="",f=a.a.Name,e=d[a.a.Extend];if(e){for(c in e)!0!==a.b[c]&&"_"!=c.substr(0,1)&&(b[c]=e[c],"function"==typeof e[c]&&(a.f||(b[c]=a.m(c,1)),b[c][f]=c));a.v(b,e,d[a.a.Static]||{},1)}};a.v=function(b,d,c,f){if(!a.f)for(var e in d)!0===a.b[e]||"function"!=typeof d[e]||e in c||(b[e]=a.m(e,f))};a.J=function(b,
d){var c=a.a.Name,f;for(f in b)!0!==a.b[f]&&"function"==typeof b[f]&&(d&&d[f]&&!a.f&&(b[f]=a.m(f,0)),"string"!=typeof b[f][c]&&(b[f][c]=f))};a.m=function(b,d){var c=a.a.parent,f=a.a["static"];return function(){return this[c][b].apply(d?this[f]:this,a.c(arguments))}};a.C=function(b,d){var c=b.prototype,f=a.a.Name,e=a.a.Constructor,g="";for(g in d)!0!==a.b[g]&&(c[g]=d[g],"function"==typeof d[g]&&(c[g][f]=g));d[e]&&(c[e]=d[e],c[e][f]=e);c[a.a.GetInstanceUid]=function(){return""}};a.D=function(b,d){var c=
"",f=a.a.Name,e=d[a.a.Static];if(e)for(c in e)!0!==a.b[c]&&(b[c]=e[c],"function"==typeof e[c]&&(b[c][f]=c))};a.F=function(b){var d=a.a.Name,c=a.a.parent,f=a.a["static"],e=a.a.Constructor,g="",h=b[f],f=h[f][a.a.Extend],l;a.f?(b[a.a.GetInstanceUid](),l=a.j(b),h.prototype[c]=l.prototype[e]):h.prototype[c]=function(){return a.h(this,arguments.callee.caller[d],a.c(arguments),0)};c=h.prototype[c];if(f)for(g in e=f.prototype,e)"function"==typeof e[g]&&!0!==a.b[g]&&(c[g]=a.G(b,g))};a.G=function(b,d){return a.f?
(b[a.a.GetInstanceUid](),a.j(b).prototype[d]):function(){return a.h(b,d,a.c(arguments),0)}};a.H=function(b){var d=a.a.Name,c=a.a.parent,f="",e=b[a.a.Extend];b[c]=function(){return a.h(this,arguments.callee.caller[d],a.c(arguments),1)};c=b[c];if(e)for(f in e)"function"!=typeof e[f]||a.b[f]||(c[f]=a.I(b,f))};a.I=function(b,d){return a.f?(b[a.a.GetClassUid](),a.j(b)[d]):function(){return a.h(b,d,a.c(arguments),1)}};a.h=function(b,d,c,f){var e=a.a.Fullname,g=a.a.self,h=b[g],l=h[a.a.Extend],k;if(!l)throw"No parent class defined for type: '"+
h[e]+"'.";k=f?l[d]:l.prototype[d];if(!(k instanceof Function))throw"No parent method named: '"+d+"' for type: '"+h[e]+"'.";b[g]=l;d=k.apply(f?b[a.a["static"]]:b,c);b[g]=h;return d};a.j=function(b){b=b[a.a.self];var d=b[a.a.Extend];if(!d)throw"No parent class defined for type: '"+b[a.a.Fullname]+"'.";return d};a.c=function(b){return 1===b.length&&a.M(b[0])?[].slice.apply(b[0]):[].slice.apply(b)};a.M=function(a){return"object"==typeof a&&"undefined"!=typeof a.callee&&"[object Array]"!=Object.prototype.toString.apply(a)};
return k.Class=a}("undefined"!==typeof module&&module.exports?global:this);
