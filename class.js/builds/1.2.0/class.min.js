/**
 * Javascript Class Helper
 * @author Tom Flidr | tomflidr(at)gmail(dot)com
 * @version 1.2
 * @date 2016-07-18
 * @usage
var ClassName = Class({
	Extend: ParentClassName,
	Static: {
		staticMethod: function () {
			// call parent static method with same name
			this.parent(param1, param2, ...);
			// call any other parent static method
			this.parent.otherParentStaticMethod(param1, param2, ...);
		}
	},
	Constructor: function () {
		// call parent Constructor
		this.parent(param1, param2);
		// call any other parent dynamic method
		this.parent.otherParentDynamicMethod(param1, param2, ...);
	},
	dynamicMethod: function () {
		// call parent dynamic method with same name
		this.parent(param1, param2);
		// call any other parent dynamic method
		this.parent.otherParentDynamicMethod(param1, param2, ...);
	}
});
*/
var Class=function(m){function a(){var b=[].slice.apply(arguments),d=a.Constants;if("string"==typeof b[0]){return a.l(b[0],1<b.length?b[1]:{})}b=a.j(b[0],"Class");b[d.Namespace]="";b[d.Fullname]="Class";return b}Function.prototype.bind||(Function.prototype.bind=function(a){function d(){return g.apply(this instanceof c?this:a,f.concat(e.call(arguments)))}function c(){}if("function"!==typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var e=[].slice,f=e.call(arguments,1),g=this;this.prototype&&(c.prototype=this.prototype);d.prototype=new c;return d});a.Constants={ClassImprint:"$classImprint",InstanceImprint:"$instanceImprint",Extend:"Extend",Static:"Static",Constructor:"Constructor",Name:"Name",Namespace:"Namespace",Fullname:"Fullname",self:"self",parent:"parent"};a.a={};a.ClassImprintBaseName="class{0}";a.InstanceImprintBaseName="instance{0}";a.c=0;a.f=0;a.g=[{},{}];a.h={};a.CustomizeSyntax=function(b){var d,c;for(c in b){d=b[c],a.a[d]=!0,a.Constants[c]=d}};a.CustomizeSyntax(a.Constants);a.Create=function(a,d){for(var c=a.split("."),e,f=m,g=0,h=c.length;g<h;g+=1){e=c[g];if(!(e in f)){throw Error("Class '"+a+"' doesn't exist!");}f=f[e]}d.unshift(f);return new(f.bind.apply(f,d))};a.Define=function(b,d){return a.l(b,d||{})};a.l=function(b,d){for(var c=b.split("."),e=c.pop(),f="",g=a.Constants,h=m,k=0,l=c.length;k<l;k+=1){f=c[k],f in h||(h[f]={}),h=h[f]}d.toString==={}.toString&&(d.toString=function(){return"[object "+b+"]"});f=a.j(d,e);f[g.Namespace]=c.join(".");f[g.Fullname]=b;return h[e]=f};a.j=function(b,d){function Class(){return a.B(b,this,[].slice.apply(arguments))}var c=Class,e=a.Constants,f=e.Extend,g=e.Name,h=e.ClassImprint,e=e.self,k="",l="";b[f]&&("function"==typeof b[f][h]?l=b[f][h]():(l=a.i(),b[f][h]=function(){return l}));k=a.i();c[h]=function(){return k};a.s(c,b);a.u(c,b);a.C(c,b);a.D(c,b);c[e]=c;b[f]&&(c[e][f]=b[f],a.h[k]=l);c.prototype[e]=c;a.m(c);c[g]=d;return c};a.B=function(b,d,c){var e=a.Constants,f=e.Constructor,g="";if(d===m){if("function"==typeof b[f]){b[f].apply(d,c)}else{throw Error("Class definition is not possible to call as function, it's necessary to create instance with 'new' keyword before class definition.");}}else{return g=a.A(),d[e.InstanceImprint]=function(){return g},a.F(d),d[f].apply(d,c)}};a.i=function(){var b=a.ClassImprintBaseName.replace("{0}",a.c);a.c+=1;return b};a.A=function(){var b=a.InstanceImprintBaseName.replace("{0}",a.f);a.f+=1;return b};a.s=function(b,d){function Prototype(){}var c=Prototype,e=a.Constants,f=e.Name,g="";if(e=d[e.Extend]){e&&(c.prototype=e.prototype),b.prototype=new c}e=b.prototype;for(g in e){"function"==typeof e[g]&&"string"!=typeof e[g][f]&&(e[g][f]=g)}};a.u=function(b,d){var c="",e=a.Constants,f=e.Name;if(e=d[e.Extend]){for(c in e){!0!==a.a[c]&&(b[c]=e[c],"function"==typeof e[c]&&(b[c][f]=c))}}};a.C=function(b,d){var c=b.prototype,e=a.Constants,f=e.Name,g=e.Constructor,h="";for(h in d){!0!==a.a[h]&&(c[h]=d[h],"function"==typeof d[h]&&(c[h][f]=h))}d[g]&&(c[g]=d[g],c[g][f]=g);c[e.InstanceImprint]=function(){return""}};a.D=function(b,d){var c="",e=a.Constants,f=e.Name;if(e=d[e.Static]){for(c in e){!0!==a.a[c]&&(b[c]=e[c],"function"==typeof e[c]&&(b[c][f]=c))}}};a.F=function(b){var d=a.Constants,c=d.Name,e=d.parent,f=d.self,g="",h=b[f],d=h[f][d.Extend];h.prototype[e]=function(){return a.b(this,arguments.callee.caller[c],[].slice.apply(arguments),0)};e=h.prototype[e];if(d){for(g in h=d.prototype,h){"function"==typeof h[g]&&!0!==a.a[g]&&(e[g]=a.G(b,g))}}};a.G=function(b,d){return function(){return a.b(b,d,[].slice.apply(arguments),0)}};a.m=function(b){var d=a.Constants,c=d.Name,e=d.parent,f="",d=b[d.Extend];b[e]=function(){return a.b(this,arguments.callee.caller[c],[].slice.apply(arguments),1)};e=b[e];if(d){for(f in d){"function"!=typeof d[f]||a.a[f]||(e[f]=a.o(b,f))}}};a.o=function(b,d){return function(){return a.b(b,d,[].slice.apply(arguments),1)}};a.b=function(b,d,c,e){var f=a.Constants,g=f.ClassImprint,h=f.InstanceImprint,f=f.self,h=b[e?g:h](),f=b[f],g=f[g](),g=a.w(g,h,e),g=a.v(f,g),g=e?g[d]:g.prototype[d],f=typeof g;if("undefined"==f){try{throw"No parent method named: '"+d+"'.";}catch(k){console.log(k.stack)}}else{if("function"!=f){throw"Parent method '"+d+"' is not a function.";}}b=g.apply(b,c);delete a.g[e][h];return b};a.w=function(b,d,c){c=a.g[c];"undefined"==typeof c[d]&&(c[d]=b);b=a.h[c[d]];if(!b){throw Error("No parent class defined.");}return c[d]=b};a.v=function(b,d){for(var c=a.Constants,e=c.Extend,c=c.ClassImprint,f=!1,g;"undefined"!=typeof b[e];){g=b[e];if(g[c]()==d){f=!0;break}b=g}if(!f){throw Error("No parent class definition found for class imprint: '"+d+"'.");}return g};return m.Class=a}("undefined"!==typeof module&&module.exports?global:this);